{
  "services": [
    {
      "name": "postiz",
      "image": "ghcr.io/gitroomhq/postiz-app:latest",
      "isMain": true,
      "internalPort": "5000",
      "environment": [
        "MAIN_URL=${MAIN_URL}",
        "FRONTEND_URL=${MAIN_URL}",
        "NEXT_PUBLIC_BACKEND_URL=${MAIN_URL}/api",
        "JWT_SECRET=${JWT_SECRET}",
        "DATABASE_URL=postgresql://postiz-user:postiz-password@postiz-postgres:5432/postiz-db-local",
        "REDIS_URL=redis://postiz-redis:6379",
        "BACKEND_INTERNAL_URL=http://localhost:3000",
        "IS_GENERAL=true",
        "DISABLE_REGISTRATION=${DISABLE_REGISTRATION:-false}",
        "NOT_SECURED=${NOT_SECURED:-false}",
        "STORAGE_PROVIDER=local",
        "UPLOAD_DIRECTORY=/uploads",
        "NEXT_PUBLIC_UPLOAD_DIRECTORY=/uploads"
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/config",
          "containerPath": "/config"
        },
        {
          "hostPath": "${APP_DATA_DIR}/uploads",
          "containerPath": "/uploads"
        }
      ],
      "dependsOn": ["postiz-postgres", "postiz-redis"]
    },
    {
      "name": "postiz-postgres",
      "image": "postgres:17-alpine",
      "environment": [
        "POSTGRES_PASSWORD=postiz-password",
        "POSTGRES_USER=postiz-user",
        "POSTGRES_DB=postiz-db-local"
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/postgres",
          "containerPath": "/var/lib/postgresql/data"
        }
      ]
    },
    {
      "name": "postiz-redis",
      "image": "redis:7.2",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/redis",
          "containerPath": "/data"
        }
      ]
    }
  ]
}