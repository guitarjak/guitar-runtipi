{
  "services": [
    {
      "name": "mysql_leantime",
      "image": "mysql:8.0",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/mysql",
          "containerPath": "/var/lib/mysql",
          "readOnly": false
        }
      ],
      "environment": {
        "MYSQL_ROOT_PASSWORD": "${MYSQL_ROOT_PASSWORD}",
        "MYSQL_DATABASE": "${MYSQL_DATABASE}",
        "MYSQL_USER": "${MYSQL_USER}",
        "MYSQL_PASSWORD": "${MYSQL_PASSWORD}"
      },
      "command": "--character-set-server=UTF8MB4 --collation-server=UTF8MB4_unicode_ci",
      "restart": "unless-stopped"
    },
    {
      "name": "leantime",
      "image": "leantime/leantime:latest",
      "isMain": true,
      "internalPort": 80,
      "dependsOn": ["mysql_leantime"],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/userfiles",
          "containerPath": "/var/www/html/public/userfiles",
          "readOnly": false
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/userfiles",
          "containerPath": "/var/www/html/userfiles",
          "readOnly": false
        }
      ],
      "environment": {
        "LEAN_DB_HOST": "mysql_leantime",
        "LEAN_DB_USER": "${MYSQL_USER}",
        "LEAN_DB_PASSWORD": "${MYSQL_PASSWORD}",
        "LEAN_DB_DATABASE": "${MYSQL_DATABASE}",
        "LEAN_DB_PORT": "3306",
        "LEAN_SITENAME": "${LEAN_SITENAME}",
        "LEAN_SESSION_PASSWORD": "${LEAN_SESSION_PASSWORD}"
      },
      "restart": "unless-stopped"
    }
  ]
}